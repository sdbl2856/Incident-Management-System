<div *ngIf="showContent">
  <br />
  <div>
    <app-card cardTitle="System Users" [options]="false" blockClass="table-border-style">
      <div class="table-responsive" style="margin-left: 35px">
        <div class="table table-hover">
          <div class="d-flex align-items-center">
            <!-- <input style="width: 300px" type="text" [(ngModel)]="searchTerm" placeholder="Search by Name" class="search form-control" /> -->

            <button style="margin-left: 80%" (click)="contentChange()" class="btn-add btn btn-success">ADD NEW</button>
          </div>
          <br />
          <div class="table-responsive" style="margin-left: 5%">
            <div>
              <div class="row">
                <div class="col-4">
                  <input 
                  type="text" 
                  placeholder="Search by Employee Code" 
                  [(ngModel)]="searchQuery" 
                  (input)="updateDisplayedData()"
                  class="form-control"
                />
                </div>
                <div class="col-4"></div>
                <div class="col-4"></div>
              </div>
          
              <table>
                <thead>
                  <tr>
                    <th >ID</th>
                    <th>Name</th>
                 
                    <th>Designation</th>
                    <th>Branch</th>
                    <th>Status</th>
                    <th>Employee No</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of displayedUserList">
                    <td >{{ row.userId }}</td>
                    <td>{{ row.fullName }}</td>
                   
                    <td>{{ row.designation }}</td>
                    <td>{{ row.branch.description }}</td>
                    <td>{{ row.status }}</td>
                    <td>{{ row.employeeCode }}</td>
                    <td class="cell-small">
                      <button (click)="onEdit(row)" class="btn btn-primary">
                        <i aria-hidden="true" class="fa fa-edit" style="padding-left: 10px"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </app-card>
 
  </div>

  <!-- pagination -->
  <nav style="margin-left: 78%" aria-label="Page navigation example">
    <ul class="pagination">
      <li class="page-item">
        <a class="page-link" href="javascript:" (click)="prevPage()" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
  
      <li class="page-item" *ngFor="let page of getPageArray()">
        <a class="page-link" href="javascript:" (click)="goToPage(page)">{{ page }}</a>
      </li>
  
      <li class="page-item">
        <a class="page-link" href="javascript:" (click)="nextPage()" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
    </ul>
  </nav>
  
  
</div>

<!--Add user Details-->
<div *ngIf="showForm">
  
  
  <app-card
    cardTitle="User Details"
    [options]="false"
    blockClass="table-border-style"
  >
 

    <form [formGroup]="formValue" class="form">
      <h4
    *ngIf="not_filled"
    class="alert_msg"
    style="color: red; text-align: center"
  >
    Please Fill All the Fields correctly

     </h4>
     <div *ngIf="showSuccessMessage" class="success-message" style="background-color:whitesmoke; padding: 10px; max-width: 400px; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
      <h4 style="color: rgb(6, 204, 39); margin: 0;">
        {{ successMessage }}
      </h4>
    </div>
     
      <!-- sec 1 -->
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label for="name" class="form-label" readonly
              >Name<label style="color: red"> * </label></label
            >
            <input
              placeholder="Enter the name here"
              style="width: 80%"
              type="text"
              formControlName="name"
              class="form-control"
              id="name"
            />
          </div>
          <div hidden class="form-group">
            <label for="id" class="form-label" readonly
              >ID<label style="color: red"> * </label></label
            >
            <input
              placeholder="Enter the name here"
              style="width: 80%"
              type="text"
              formControlName="userId"
              class="form-control"
              id="userId"
            />
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label for="emp_code" class="form-label" readonly
              >Employee Code
              <label
                style="color: red"
                
              >
                *
              </label></label
            >
            <input
              placeholder="Eg:sdbl1234"
              style="width: 80%"
              type="text"
              formControlName="emp_code"
              class="form-control"
              id="emp_code"
            />
          </div>
        </div>
      </div>
      <br />

      <!-- sec 2 -->
      <div class="row">
        <!-- emty -->
        <div class="col-sm-6">
          <div class="form-group">
            <label for="grade" class="form-label" readonly
              >Grade
              <label style="color: red">
                *
              </label></label
            >
            <input
              placeholder="Eg:2"
              style="width: 80%"
              type="text"
              formControlName="grade"
              class="form-control"
              id="grade"
            />
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label for="designation" class="form-label"
              >Designation<label
                style="color: red"
              >
                *
              </label></label
            >
            <input
              placeholder="Eg:SE"
              style="width: 80%"
              type="text"
              formControlName="designation"
              class="form-control"
              id="designation"
            />
          </div>
        </div>
      </div>
      <br />

      <!-- sec 3 -->
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label for="email" class="form-label"
              >Email
              <label style="color: red">
                *
              </label></label
            >
            <input
              placeholder="eg:nav@gmail.com"
              style="width: 80%"
              type="email"
              formControlName="email"
              class="form-control"
              id="email"
            />
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label for="dropdown" class="form-label"
              >User Type <label style="color: red"> * </label></label
            >
            <select
              style="width: 50%"
              id="user_type"
              formControlName="user_type"
              class="form-select"
              required
              (change)="onUserTypeChange()"
            >
            <option
            *ngFor="let user_type_list of user_types"
            [value]="user_type_list.type"
          >
            {{ user_type_list.description }}
            
            
          </option>
            </select>
          </div>
        </div>
       
      </div>
      <br />
      <!-- sec 4 -->
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group" *ngIf="showBranchDropdown">
            <label for="dropdown" class="form-label"
              >Branch <label style="color: red">*</label></label
            >
            <select
              style="width: 50%"
              id="branch"
              formControlName="branch"
              class="form-select"
              required
              
            >
              <option
                *ngFor="let branch of specificBranches"
                [value]="branch.branchId"
              >
                {{ branch.description }}
              </option>
            </select>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group"   *ngIf="showRegionDropdown">
            <label for="dropdown" class="form-label"
              >Region
              <label style="color: red">
                *
              </label></label
            >
            <select
              style="width: 50%"
              id="region"
              formControlName="region"
              class="form-select"
              required
              (change)="onRegionChange()"
            
            >
              <option *ngFor="let region of regions" [value]="region.regionId">
                {{ region.description }}
              </option>
            </select>
          </div>
        </div>
      </div>
      <br />

      <!-- sec 5 -->
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label for="dropdown" class="form-label"
              >STATUS<label style="color: red">*</label></label
            >
            <select
              style="width: 50%"
              id="status"
              formControlName="status"
              class="form-select"
              required
            >
              <option value="A">ACTIVE</option>
              <option value="I">INACTIVE</option>
            </select>
          </div>

        </div>
      <div class="col-sm-6" >
        <div class="form-group"  *ngIf="showDepartmentDropdown">
          <label for="dropdown" class="form-label"
            >DEPARTMENT <label style="color: red"> * </label></label
          >
          <select
            style="width: 50%"
            id="dep"
            formControlName="dep"
            class="form-select"
            required
           
          >
          <option
          *ngFor="let departments of departments"
          [value]="departments.departmentId"
        >
          {{ departments.description }}
          
          
        </option>
          </select>
        </div>
      </div>
          
      </div>
      <br>
      <div class="row">
          
        <div class="col-sm-6" style="padding: 0;">
          <br>
          <h6 class="mb-0" style="color: rgb(17, 15, 15); margin-left: 85px;">
            <span style="color: red">*</span> Mark is for required all the fields.
        </h6>
        
          
        </div>
      
        <div class="col-sm-6">
        
          <div class="button-container" style="margin-left: 98%px;">
            <button
              (click)="clickCancel()"
              class="btn btn-danger"
              type="button"
             
            >
              Cancel
            </button>
            <button
              *ngIf="create_btn"
              (click)="postDetails()"
              class="btn btn-primary"
              type="button"
            
            >
              Create
            </button>
            <button
              *ngIf="update_btn"
               (click)="updateUserDetails()"
              class="btn btn-primary"
              type="button"
             
            >
              UPDATE
            </button>
          </div>
        </div>
      </div>
      <br />
      
    </form>
  </app-card>
</div>
